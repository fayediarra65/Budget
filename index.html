<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Budget Tracker</title>
<style>
    body { font-family: Arial, sans-serif; padding: 20px; background: #fdf6e3; }
    h1 { color: #6B4532; text-align: center; }
    input, select, button { padding: 8px; margin: 5px; border-radius: 5px; border: 1px solid #C9A58C; }
    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
    th, td { border: 1px solid #C9A58C; padding: 10px; text-align: center; }
    th { background: #C9A58C; color: white; }
    .notif { margin-top: 10px; color: green; font-weight: bold; }
</style>
</head>
<body>

<h1>üí∞ Mon Budget Mensuel</h1>

<div>
    <label>Salaire du mois (FCFA) : </label>
    <input type="number" id="salaire" placeholder="Ex: 100000">
    <button onclick="setSalaire()">‚úÖ Enregistrer</button>
</div>

<h2>Postes / Cat√©gories</h2>
<div>
    <input type="text" id="posteNom" placeholder="Nom du poste (ex: Argent quotidien)">
    <input type="number" id="posteMontant" placeholder="Montant allou√©">
    <button onclick="ajouterPoste()">‚ûï Ajouter poste</button>
</div>

<h2>D√©penses</h2>
<div>
    <select id="depensePoste">
        <option value="">-- Choisir un poste --</option>
    </select>
    <input type="number" id="depenseMontant" placeholder="Montant d√©pens√©">
    <button onclick="ajouterDepense()">üí∏ Ajouter d√©pense</button>
</div>

<div class="notif" id="notif"></div>

<h2>R√©sum√©</h2>
<p>Total disponible : <span id="totalDisponible">0</span> FCFA</p>

<table>
    <thead>
        <tr>
            <th>Poste</th>
            <th>Montant allou√©</th>
            <th>D√©pens√©</th>
            <th>Restant</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody id="tablePostes"></tbody>
</table>

<script>
let total = 0;
let postes = [];

// Sauvegarde automatique
function saveBudget() {
    localStorage.setItem('budgetData', JSON.stringify({ total, postes }));
}

// Charger les donn√©es
function loadBudget() {
    const saved = localStorage.getItem('budgetData');
    if (saved) {
        const data = JSON.parse(saved);
        total = data.total;
        postes = data.postes;
        renderTable();
    }
}

// D√©finir le salaire
function setSalaire() {
    total = parseFloat(document.getElementById('salaire').value) || 0;
    showNotif('üí∞ Salaire enregistr√© : ' + total + ' FCFA');
    saveBudget();
    renderTable();
}

// Ajouter un poste
function ajouterPoste() {
    const nom = document.getElementById('posteNom').value.trim();
    const montant = parseFloat(document.getElementById('posteMontant').value);
    if (!nom || isNaN(montant) || montant <= 0) return showNotif('‚ö†Ô∏è Nom ou montant invalide');

    postes.push({ nom, montantAlloue: montant, depense: 0 });
    document.getElementById('posteNom').value = '';
    document.getElementById('posteMontant').value = '';
    showNotif('‚ûï Poste ajout√© : ' + nom);
    saveBudget();
    renderTable();
}

// Ajouter une d√©pense
function ajouterDepense() {
    const posteSelect = document.getElementById('depensePoste');
    const nomPoste = posteSelect.value;
    const montant = parseFloat(document.getElementById('depenseMontant').value);

    if (!nomPoste || isNaN(montant) || montant <= 0) return showNotif('‚ö†Ô∏è Poste ou montant invalide');

    const poste = postes.find(p => p.nom === nomPoste);
    if (!poste) return;

    poste.depense += montant;
    total -= montant;
    if (total < 0) total = 0;

    document.getElementById('depenseMontant').value = '';
    showNotif('üí∏ D√©pense enregistr√©e pour ' + nomPoste);
    saveBudget();
    renderTable();
}

// Supprimer un poste
function supprimerPoste(nom) {
    const index = postes.findIndex(p => p.nom === nom);
    if (index !== -1) {
        total += postes[index].montantAlloue - postes[index].depense; // r√©cup√©rer le reste
        postes.splice(index, 1);
        saveBudget();
        renderTable();
    }
}

// Affichage du tableau
function renderTable() {
    const tbody = document.getElementById('tablePostes');
    tbody.innerHTML = '';
    const select = document.getElementById('depensePoste');
    select.innerHTML = '<option value="">-- Choisir un poste --</option>';

    postes.forEach(p => {
        const restant = p.montantAlloue - p.depense;
        tbody.innerHTML += `
            <tr>
                <td>${p.nom}</td>
                <td>${p.montantAlloue}</td>
                <td>${p.depense}</td>
                <td>${restant}</td>
                <td><button onclick="supprimerPoste('${p.nom}')">üóëÔ∏è Supprimer</button></td>
            </tr>
        `;
        select.innerHTML += `<option value="${p.nom}">${p.nom}</option>`;
    });

    document.getElementById('totalDisponible').textContent = total;
}

// Notification
function showNotif(msg) {
    const n = document.getElementById('notif');
    n.textContent = msg;
    setTimeout(() => n.textContent = '', 3000);
}

loadBudget();
</script>

</body>
</html>
